<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>TripBoss</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- font awesome cdn -->
        <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" /> -->
        <!-- fonts -->
        <link rel = "stylesheet" href = "font/fonts.css">
        <!-- normalize css -->
        <link rel = "stylesheet" href = "css/normalize.css">
        <!-- custom css -->
        <link rel = "stylesheet" href = "css/utility.css">
        <link rel = "stylesheet" href = "css/style.css">
        <!-- <link rel = "stylesheet" href = "css/responsive.css"> -->
    </head>
<body>
    <!-- addpicture section -->
    <section id = "signup" class = "py-4">
        <div class = "container">
            <div class = "title-wrap">
                <span class = "sm-title">Adding Picture<br>
                
                <h2 class = "lg-title">Add Picture</h2>
               
            </div>

            <div class = "signup-row">
                    <form class = "signup-form">

                        <form class = "flex">
                                <div id="file" class="form-control" style=" border-color: #1ec6b6;">
                                    <label for="myfile" style="justify-content: left;">Select an Image:</label>
                                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <input type="file" id="myfile" name="myfile" style="width: 250px;">
                                </div>
                                <span class="error form-control" id="image-error" style="color: red; border-color: white; padding: 0px; margin: auto;"></span>
                        </form>
                        
                        <form class="flex">
                            <input type = "button" class = "btn" value = "Add Picture" onclick="validateForm()"> 
                        </form>
                        
                    </form>
            </div>
        </div>
    </section>
    <!-- end of addpicture section -->

    <script>
        const file = document.getElementById('file');
        const myfile = document.getElementById('myfile');

        // ErrorsField
        const imageError = document.getElementById('image-error');

        let isValid = true;
            // Add event listeners to input fields
            file.addEventListener("input", validateImage);

        function validateImage(){

                if(IsImage){
                    imageError.textContent = '';
                    file.style.borderColor = '#1ec6b6';
                    isValid = true;
                }
            }

            function IsImage(){
                if (myfile.files.length === 0) {
                    setErrorFor(imageSize,imageError, 'Please select an image');
                    isValid = false;
                } else {
                    const fileSize = myfile.files[0].size / 1024 / 1024; // in MB
                    if (fileSize < 0) {
                        setErrorFor(imageSize,imageError, 'Image size should be greater than 5MB');
                        isValid = false;
                    }
                }
                return isValid;
            }
        
            function validateForm() {
            
    
            if (myfile.files.length === 0) {
                setErrorFor(file,imageError, 'Please select an image');
                isValid = false;
            } else {
                const fileSize = myfile.files[0].size / 1024 / 1024; // in MB
                if (fileSize < 0) {
                    setErrorFor(imageSize,imageError, 'Image size should be greater than 5MB');
                    isValid = false;
                }
            }
            if(isValid){
                alert("Picture added successfully");
                window.location.href = "gallery.html";
            }
        }
        function setErrorFor(field,input, message) {
            input.textContent = message;
            field.style.borderColor = "red";
        }
    </script>
</body>
</html>